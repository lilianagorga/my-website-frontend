<section class="admin-page">
  <div class="admin-container">
    <h1 class="admin-title">Admin Dashboard</h1>

    <div class="tabs">
      <button
        class="tab"
        [class.active]="activeTab === 'projects'"
        (click)="switchTab('projects')">
        Projects
      </button>
      <button
        class="tab"
        [class.active]="activeTab === 'messages'"
        (click)="switchTab('messages')">
        Messages
      </button>
    </div>

    @if (activeTab === 'projects') {
      <div class="tab-content">
        <div class="tab-header">
          <h2>Projects ({{ projects.length }})</h2>
          <button class="btn-add" (click)="openAddProject()">+ Add Project</button>
        </div>

        @if (projects.length === 0) {
          <p class="empty">No projects yet.</p>
        } @else {
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>Title</th>
                  <th>Tech Stack</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                @for (project of projects; track project.id) {
                  <tr>
                    <td>{{ project.title }}</td>
                    <td>
                      <div class="tech-tags">
                        @for (tech of project.techStack; track tech) {
                          <span class="tech-tag">{{ tech }}</span>
                        }
                      </div>
                    </td>
                    <td>
                      <div class="actions">
                        <button class="btn-edit" (click)="openEditProject(project)">Edit</button>
                        <button class="btn-delete" (click)="deleteProject(project)">Delete</button>
                      </div>
                    </td>
                  </tr>
                }
              </tbody>
            </table>
          </div>
        }
      </div>
    }

    @if (activeTab === 'messages') {
      <div class="tab-content">
        <h2>Messages ({{ messages.length }})</h2>

        @if (messages.length === 0) {
          <p class="empty">No messages yet.</p>
        } @else {
          <div class="messages-list">
            @for (msg of messages; track msg.id) {
              <div class="message-card">
                <div class="message-header">
                  <div>
                    <strong>{{ msg.name }}</strong>
                    <span class="message-email">{{ msg.email }}</span>
                  </div>
                  <div class="message-meta">
                    @if (msg.createdAt) {
                      <span class="message-date">{{ msg.createdAt }}</span>
                    }
                    <button class="btn-delete-sm" (click)="deleteMessage(msg)">Delete</button>
                  </div>
                </div>
                <p class="message-body">{{ msg.message }}</p>
              </div>
            }
          </div>
        }
      </div>
    }
  </div>
</section>

@if (showProjectForm) {
  <app-project-form
    [project]="editingProject"
    (saved)="onProjectSaved()"
    (cancelled)="closeProjectForm()" />
}
